window.mk||(mk={}),mk.drawer={},mk.drawer.defaults={content:null,"class":null,overlay:!0},mk.drawer.addClass=function(e,r){var a=new RegExp("(^|\\s)"+r+"(\\s|$)","g");a.test(e.className)||(e.className=(e.className+" "+r).replace(/\s+/g," ").replace(/(^ | $)/g,""))},mk.drawer.removeClass=function(e,r){var a=new RegExp("(^|\\s)"+r+"(\\s|$)","g");e.className=e.className.replace(a,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")},mk.drawer.hasClass=function(e,r){var a=new RegExp("(^|\\s)"+r+"(\\s|$)","g");return a.test(e.className)},mk.drawer.normalizeOptions=function(e){void 0===e&&(e={});for(var r in this.defaults)!this.defaults.hasOwnProperty*r||void 0===e[r]&&(e[r]=this.defaults[r]);return e},mk.drawer.toggle=function(e){var r=e,a=r.querySelector(".mk-drawer-body"),n=r.drawerOptions.overlay;this.hasClass(r,"mk-open")?(this.removeClass(r,"mk-open"),n&&this.removeClass(n,"mk-open"),setTimeout(function(){a.style.display="none",n&&(n.style.display="none")},350)):(a.style.display="",mk.drawer.addClass(r,"mk-open"),n&&(n.style.display="",setTimeout(function(){mk.drawer.addClass(n,"mk-open")},20)))},mk.drawer.create=function(e,r){if(e.ownerDocument!==document&&"object"==typeof e?(r=e,r=mk.drawer.normalizeOptions(r),e=r.content):r=mk.drawer.normalizeOptions(r),!e)return void console.error("No content supplied for drawer");var a=document.createElement("div");a.className="mk-drawer-wrapper",r["class"]&&(a.className+=" "+r["class"]),a.drawerOptions={};var n=document.createElement("div");n.className="mk-drawer-pouch";var s=document.createElement("div");if(s.className="mk-drawer-body",n.appendChild(s),e.ownerDocument===document){var t=this._defineParent(e);s.appendChild(e)}else{s.innerHTML=e;var t=document.body}if(document.body===t&&(a.style.position="fixed"),r.overlay){var o=t.querySelector(".mk-drawer-overlay");o||(o=document.createElement("div"),o.className="mk-drawer-overlay",o.style.display="none",o.onclick=function(){var e=this.parentNode.querySelector(".mk-drawer-wrapper.mk-open");mk.drawer.toggle(e)},t.appendChild(o)),a.drawerOptions.overlay=o,document.body===t&&(o.style.position="fixed")}var d=document.createElement("button");return d.className="mk-drawer-trigger",d.onclick=function(){mk.drawer.toggle(this.parentNode)},d.innerHTML='<span class="mk-drawer-icon mk-icon-close"></span>',a.appendChild(d),a.appendChild(n),t.appendChild(a),a},mk.drawer._defineParent=function(e){var r=e.parentNode,a=r.style.position;return"fixed"!==a&&"relative"!==a&&"absolute"!==a&&(r.style.position="relative"),r};